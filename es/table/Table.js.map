{"version":3,"sources":["table/Table.jsx"],"names":["React","classNames","RcTable","Column","ColumnGroup","INTERNAL_HOOKS","Spin","Pagination","ConfigContext","usePagination","DEFAULT_PAGE_SIZE","getPaginationParam","useLazyKVMap","useSelection","SELECTION_ALL","SELECTION_INVERT","useSorter","getSortData","useFilter","getFilterData","useTitleColumns","renderExpandIcon","scrollTo","defaultLocale","EMPTY_LIST","Table","props","customizePrefixCls","prefixCls","className","size","bordered","dropdownPrefixCls","dataSource","pagination","rowSelection","rowKey","rowClassName","columns","onChange","getPopupContainer","loading","expandIcon","expandable","expandedRowRender","indentSize","childrenColumnName","scroll","sortDirections","locale","useContext","contextLocale","renderEmpty","direction","tableLocale","rawData","getPrefixCls","expandType","useMemo","some","item","internalRefs","body","useRef","getRowKey","record","getRecordByKey","changeEventInfo","triggerOnChange","info","reset","changeInfo","resetPagination","current","pageSize","scrollToFirstRowOnChange","getContainer","filters","sorter","currentDataSource","sorterStates","filterStates","onSorterChange","transformSorterColumns","sortStates","sorterTitleProps","getSorters","sortedData","onFilterChange","transformFilterColumns","getFilters","mergedData","columnTitleProps","transformTitleColumns","onPaginationChange","length","mergedPagination","pageData","total","currentPageData","slice","data","transformSelectionColumns","selectedKeySet","internalRowClassName","index","indent","mergedRowClassName","has","mergedExpandable","expandIconColumnIndex","transformColumns","useCallback","innerColumns","topPaginationNode","bottomPaginationNode","paginationSize","undefined","renderPagination","position","spinProps","spinning","wrapperClassNames","e","preventDefault","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport RcTable, { Column, ColumnGroup } from 'rc-table';\nimport { INTERNAL_HOOKS } from 'rc-table/lib/Table';\nimport Spin from '../spin';\nimport Pagination from '../pagination';\nimport { ConfigContext } from '../config-provider/context';\nimport usePagination, { DEFAULT_PAGE_SIZE, getPaginationParam } from './hooks/usePagination';\nimport useLazyKVMap from './hooks/useLazyKVMap';\nimport useSelection, { SELECTION_ALL, SELECTION_INVERT } from './hooks/useSelection';\nimport useSorter, { getSortData } from './hooks/useSorter';\nimport useFilter, { getFilterData } from './hooks/useFilter';\nimport useTitleColumns from './hooks/useTitleColumns';\nimport renderExpandIcon from './ExpandIcon';\nimport scrollTo from '../_util/scrollTo';\nimport defaultLocale from '../locale/en_US';\nconst EMPTY_LIST = [];\nfunction Table(props) {\n    const { prefixCls: customizePrefixCls, className, size, bordered, dropdownPrefixCls, dataSource, pagination, rowSelection, rowKey, rowClassName, columns, onChange, getPopupContainer, loading, expandIcon, expandable, expandedRowRender, indentSize, childrenColumnName = 'children', scroll, sortDirections, locale, } = props;\n    const { locale: contextLocale = defaultLocale, renderEmpty, direction } = React.useContext(ConfigContext);\n    const tableLocale = locale || contextLocale.Table;\n    const rawData = dataSource || EMPTY_LIST;\n    const { getPrefixCls } = React.useContext(ConfigContext);\n    const prefixCls = getPrefixCls('table', customizePrefixCls);\n    const expandType = React.useMemo(() => {\n        if (rawData.some(item => item[childrenColumnName])) {\n            return 'nest';\n        }\n        if (expandedRowRender || (expandable && expandable.expandedRowRender)) {\n            return 'row';\n        }\n        return null;\n    }, [rawData]);\n    const internalRefs = {\n        body: React.useRef(),\n    };\n    // ============================ RowKey ============================\n    const getRowKey = React.useMemo(() => {\n        if (typeof rowKey === 'function') {\n            return rowKey;\n        }\n        return (record) => record[rowKey];\n    }, [rowKey]);\n    const [getRecordByKey] = useLazyKVMap(rawData, childrenColumnName, getRowKey);\n    // ============================ Events =============================\n    const changeEventInfo = {};\n    const triggerOnChange = (info, reset = false) => {\n        const changeInfo = Object.assign(Object.assign({}, changeEventInfo), info);\n        if (reset) {\n            changeEventInfo.resetPagination();\n            // Reset event param\n            if (changeInfo.pagination.current) {\n                changeInfo.pagination.current = 1;\n            }\n            // Trigger pagination events\n            if (pagination && pagination.onChange) {\n                pagination.onChange(1, changeInfo.pagination.pageSize);\n            }\n        }\n        if (scroll && scroll.scrollToFirstRowOnChange !== false && internalRefs.body.current) {\n            scrollTo(0, {\n                getContainer: () => internalRefs.body.current,\n            });\n        }\n        if (onChange) {\n            onChange(changeInfo.pagination, changeInfo.filters, changeInfo.sorter, {\n                currentDataSource: getFilterData(getSortData(rawData, changeInfo.sorterStates, childrenColumnName), changeInfo.filterStates),\n            });\n        }\n    };\n    /**\n     * Controlled state in `columns` is not a good idea that makes too many code (1000+ line?)\n     * to read state out and then put it back to title render.\n     * Move these code into `hooks` but still too complex.\n     * We should provides Table props like `sorter` & `filter` to handle control in next big version.\n     */\n    // ============================ Sorter =============================\n    const onSorterChange = (sorter, sorterStates) => {\n        triggerOnChange({\n            sorter,\n            sorterStates,\n        }, false);\n    };\n    const [transformSorterColumns, sortStates, sorterTitleProps, getSorters] = useSorter({\n        prefixCls,\n        columns: columns || [],\n        onSorterChange,\n        sortDirections: sortDirections || ['ascend', 'descend'],\n    });\n    const sortedData = React.useMemo(() => getSortData(rawData, sortStates, childrenColumnName), [\n        rawData,\n        sortStates,\n    ]);\n    changeEventInfo.sorter = getSorters();\n    changeEventInfo.sorterStates = sortStates;\n    // ============================ Filter ============================\n    const onFilterChange = (filters, filterStates) => {\n        triggerOnChange({\n            filters,\n            filterStates,\n        }, true);\n    };\n    const [transformFilterColumns, filterStates, getFilters] = useFilter({\n        prefixCls,\n        dropdownPrefixCls,\n        columns: columns || [],\n        onFilterChange,\n        getPopupContainer,\n    });\n    const mergedData = getFilterData(sortedData, filterStates);\n    changeEventInfo.filters = getFilters();\n    changeEventInfo.filterStates = filterStates;\n    // ============================ Column ============================\n    const columnTitleProps = React.useMemo(() => (Object.assign({}, sorterTitleProps)), [sorterTitleProps]);\n    const [transformTitleColumns] = useTitleColumns(columnTitleProps);\n    // ========================== Pagination ==========================\n    const onPaginationChange = (current, pageSize) => {\n        triggerOnChange({\n            pagination: Object.assign(Object.assign({}, changeEventInfo.pagination), { current, pageSize }),\n        });\n    };\n    const [mergedPagination, resetPagination] = usePagination(mergedData.length, pagination, onPaginationChange);\n    changeEventInfo.pagination =\n        pagination === false ? {} : getPaginationParam(pagination, mergedPagination);\n    changeEventInfo.resetPagination = resetPagination;\n    // ============================= Data =============================\n    const pageData = React.useMemo(() => {\n        if (pagination === false ||\n            !mergedPagination.pageSize ||\n            mergedData.length < mergedPagination.total) {\n            return mergedData;\n        }\n        const { current = 1, pageSize = DEFAULT_PAGE_SIZE } = mergedPagination;\n        const currentPageData = mergedData.slice((current - 1) * pageSize, current * pageSize);\n        return currentPageData;\n    }, [\n        !!pagination,\n        mergedData,\n        mergedPagination && mergedPagination.current,\n        mergedPagination && mergedPagination.pageSize,\n        mergedPagination && mergedPagination.total,\n    ]);\n    // ========================== Selections ==========================\n    const [transformSelectionColumns, selectedKeySet] = useSelection(rowSelection, {\n        prefixCls,\n        data: mergedData,\n        pageData,\n        getRowKey,\n        getRecordByKey,\n        expandType,\n        childrenColumnName,\n    });\n    const internalRowClassName = (record, index, indent) => {\n        let mergedRowClassName;\n        if (typeof rowClassName === 'function') {\n            mergedRowClassName = classNames(rowClassName(record, index, indent));\n        }\n        else {\n            mergedRowClassName = classNames(rowClassName);\n        }\n        return classNames({\n            [`${prefixCls}-row-selected`]: selectedKeySet.has(getRowKey(record, index)),\n        }, mergedRowClassName);\n    };\n    // ========================== Expandable ==========================\n    const mergedExpandable = Object.assign({}, expandable);\n    // Customize expandable icon\n    mergedExpandable.expandIcon =\n        mergedExpandable.expandIcon || expandIcon || renderExpandIcon(tableLocale);\n    // Adjust expand icon index\n    if (expandType === 'nest') {\n        mergedExpandable.expandIconColumnIndex = rowSelection ? 1 : 0;\n    }\n    // Indent size\n    mergedExpandable.indentSize = mergedExpandable.indentSize || indentSize || 15;\n    // ============================ Render ============================\n    const transformColumns = React.useCallback((innerColumns) => {\n        return transformTitleColumns(transformSelectionColumns(transformFilterColumns(transformSorterColumns(innerColumns))));\n    }, [transformSorterColumns, transformFilterColumns, transformSelectionColumns]);\n    let topPaginationNode;\n    let bottomPaginationNode;\n    if (pagination !== false) {\n        let paginationSize;\n        if (mergedPagination.size) {\n            paginationSize = mergedPagination.size;\n        }\n        else {\n            paginationSize = size === 'small' || size === 'middle' ? 'small' : undefined;\n        }\n        const renderPagination = () => (<Pagination className={`${prefixCls}-pagination`} {...mergedPagination} size={paginationSize}/>);\n        switch (mergedPagination.position) {\n            case 'top':\n                topPaginationNode = renderPagination();\n                break;\n            case 'both':\n                topPaginationNode = renderPagination();\n                bottomPaginationNode = renderPagination();\n                break;\n            default:\n                bottomPaginationNode = renderPagination();\n        }\n    }\n    // >>>>>>>>> Spinning\n    let spinProps;\n    if (typeof loading === 'boolean') {\n        spinProps = {\n            spinning: loading,\n        };\n    }\n    else {\n        spinProps = loading;\n    }\n    const wrapperClassNames = classNames(`${prefixCls}-wrapper`, {\n        [`${prefixCls}-wrapper-rtl`]: direction === 'rtl',\n    });\n    return (<div className={wrapperClassNames} onTouchMove={e => {\n        e.preventDefault();\n    }}>\n      <Spin spinning={false} {...spinProps}>\n        {topPaginationNode}\n        <RcTable {...props} expandable={mergedExpandable} prefixCls={prefixCls} className={classNames(className, {\n        [`${prefixCls}-middle`]: size === 'middle',\n        [`${prefixCls}-small`]: size === 'small',\n        [`${prefixCls}-bordered`]: bordered,\n        [`${prefixCls}-rtl`]: direction === 'rtl',\n    })} data={pageData} rowKey={getRowKey} rowClassName={internalRowClassName} emptyText={renderEmpty('Table')} \n    // Internal\n    internalHooks={INTERNAL_HOOKS} internalRefs={internalRefs} transformColumns={transformColumns}/>\n        {bottomPaginationNode}\n      </Spin>\n    </div>);\n}\nTable.defaultProps = {\n    rowKey: 'key',\n};\nTable.SELECTION_ALL = SELECTION_ALL;\nTable.SELECTION_INVERT = SELECTION_INVERT;\nTable.Column = Column;\nTable.ColumnGroup = ColumnGroup;\nexport default Table;\n"],"file":"Table.js"}