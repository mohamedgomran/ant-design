{"version":3,"sources":["form/FormItemInput.jsx"],"names":["React","classNames","LoadingOutlined","CloseCircleFilled","CheckCircleFilled","ExclamationCircleFilled","useMemo","CSSMotion","Col","FormContext","useCacheErrors","iconMap","success","warning","error","validating","FormItemInput","prefixCls","wrapperCol","children","errors","onDomErrorVisibleChange","hasFeedback","validateStatus","extra","useState","forceUpdate","baseClassName","formContext","useContext","mergedWrapperCol","className","changedVisible","visible","cacheErrors","memoErrors","_","nextVisible","IconNode","icon","subFormContext","labelCol","motionClassName","map","index"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport { LoadingOutlined, CloseCircleFilled, CheckCircleFilled, ExclamationCircleFilled, } from '@ant-design/icons';\nimport useMemo from 'rc-util/lib/hooks/useMemo';\nimport CSSMotion from 'rc-animate/lib/CSSMotion';\nimport Col from '../grid/col';\nimport { FormContext } from './context';\nimport { useCacheErrors } from './util';\nconst iconMap = {\n    success: CheckCircleFilled,\n    warning: ExclamationCircleFilled,\n    error: CloseCircleFilled,\n    validating: LoadingOutlined,\n};\nconst FormItemInput = ({ prefixCls, wrapperCol, children, errors, onDomErrorVisibleChange, hasFeedback, validateStatus, extra, }) => {\n    const [, forceUpdate] = React.useState({});\n    const baseClassName = `${prefixCls}-item`;\n    const formContext = React.useContext(FormContext);\n    const mergedWrapperCol = wrapperCol || formContext.wrapperCol || {};\n    const className = classNames(`${baseClassName}-control`, mergedWrapperCol.className);\n    const [visible, cacheErrors] = useCacheErrors(errors, changedVisible => {\n        if (changedVisible) {\n            onDomErrorVisibleChange(true);\n        }\n        forceUpdate({});\n    });\n    const memoErrors = useMemo(() => cacheErrors, visible, (_, nextVisible) => nextVisible);\n    // Should provides additional icon if `hasFeedback`\n    const IconNode = validateStatus && iconMap[validateStatus];\n    const icon = hasFeedback && IconNode ? (<span className={`${baseClassName}-children-icon`}>\n        <IconNode />\n      </span>) : null;\n    // Pass to sub FormItem should not with col info\n    const subFormContext = Object.assign({}, formContext);\n    delete subFormContext.labelCol;\n    delete subFormContext.wrapperCol;\n    return (<FormContext.Provider value={subFormContext}>\n      <Col {...mergedWrapperCol} className={className}>\n        <div className={`${baseClassName}-control-input`}>\n          {children}\n          {icon}\n        </div>\n        <CSSMotion visible={visible} motionName=\"show-help\" onLeaveEnd={() => {\n        onDomErrorVisibleChange(false);\n    }} motionAppear removeOnLeave>\n          {({ className: motionClassName }) => {\n        return (<div className={classNames(`${baseClassName}-explain`, motionClassName)} key=\"help\">\n                {memoErrors.map((error, index) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <div key={index}>{error}</div>))}\n              </div>);\n    }}\n        </CSSMotion>\n        {extra && <div className={`${baseClassName}-extra`}>{extra}</div>}\n      </Col>\n    </FormContext.Provider>);\n};\nexport default FormItemInput;\n"],"file":"FormItemInput.js"}